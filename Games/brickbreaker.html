<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Brick Breaker — Games</title>
  <link rel="stylesheet" href="../porfolio.css">
  <style>
    .wrap { max-width: var(--max); margin: 0 auto; padding: 24px 18px; }
    .top-actions { display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; }
    .panel { background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 92%, transparent), var(--surface)); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden }
    .panel-body { padding: 18px }
    .game-area { display:flex; gap:18px; align-items:flex-start; flex-wrap:wrap }
    canvas { background: linear-gradient(180deg,#0b3742,#07313a); border-radius:8px; display:block }
    .hud { display:flex; gap:12px; align-items:center; flex-wrap:wrap }
    .stat { border:1px solid var(--border); background:var(--bg); padding:8px 10px; border-radius:10px; box-shadow:var(--shadow-soft) }
    .controls { margin-top:8px }
    .btn{ background:#0ea5a4; padding:8px 12px; border-radius:8px; color:#052024; border:none; cursor:pointer }
    @media (max-width:800px){ .game-area{flex-direction:column;align-items:center} }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-badge" aria-hidden="true">TH</div>
        <div class="brand-text"><strong>THET HTAR SANN</strong><span class="note">Brick Breaker</span></div>
      </div>
      <div class="top-actions">
        <a class="cta" href="../games.html">Back to Games</a>
        <a class="cta" href="../porfolio.html">Back to Portfolio</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="panel">
      <div class="panel-body">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
          <div>
            <h1 style="margin:0">Brick Breaker</h1>
            <p class="subtitle" style="margin:6px 0 0">Destroy all bricks with the bouncing ball. Don't let the ball fall below the paddle.</p>
          </div>
          <div class="hud">
            <div class="stat">Score: <strong id="score">0</strong></div>
            <div class="stat">Lives: <strong id="lives">3</strong></div>
            <div class="controls"><button id="startBtn" class="btn">Start</button><button id="restartBtn" class="btn" style="margin-left:8px">Restart</button></div>
          </div>
        </div>

        <div class="game-area" style="margin-top:16px">
          <canvas id="gameCanvas" width="720" height="480" aria-label="Brick Breaker game"></canvas>
          <div style="max-width:320px">
            <h3 style="margin-top:0">How to play</h3>
            <ul class="subtitle">
              <li>Move paddle with Left/Right arrows or mouse.</li>
              <li>Ball bounces off walls, paddle, and bricks.</li>
              <li>Lose a life if ball falls below paddle (3 lives).</li>
              <li>Destroy all bricks to win.</li>
            </ul>
            <p class="subtitle">Tip: click <strong>Start</strong> or press space to pause/resume.</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    (function(){
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');
      const scoreEl = document.getElementById('score');
      const livesEl = document.getElementById('lives');
      const startBtn = document.getElementById('startBtn');
      const restartBtn = document.getElementById('restartBtn');

      const W = canvas.width, H = canvas.height;
      const PADDLE_WIDTH = 120, PADDLE_HEIGHT = 12; const PADDLE_Y = H - 32;
      const BALL_RADIUS = 8;
      const BRICK_ROWS = 5, BRICK_COLS = 10; const BRICK_PADDING = 8; const BRICK_TOP = 48; const BRICK_LEFT = 32;

      let paddleX = (W - PADDLE_WIDTH)/2;
      let ball = { x: W/2, y: PADDLE_Y - BALL_RADIUS - 2, vx: 3.5, vy: -3.5, radius: BALL_RADIUS };
      let bricks = [];
      let score = 0, lives = 3;
      let running = false, paused = false, animationId = null;

      function initBricks(){
        bricks = [];
        const brickWidth = (W - BRICK_LEFT*2 - (BRICK_COLS-1)*BRICK_PADDING) / BRICK_COLS;
        for(let r=0;r<BRICK_ROWS;r++){
          bricks[r] = [];
          for(let c=0;c<BRICK_COLS;c++){
            const x = BRICK_LEFT + c*(brickWidth+BRICK_PADDING);
            const y = BRICK_TOP + r*(20+BRICK_PADDING);
            bricks[r][c] = { x, y, w: brickWidth, h: 20, alive:true, hits:1 };
          }
        }
      }

      function resetBallAndPaddle(){
        paddleX = (W - PADDLE_WIDTH)/2;
        ball.x = W/2; ball.y = PADDLE_Y - BALL_RADIUS - 2; ball.vx = 3.5*(Math.random()>0.5?1:-1); ball.vy = -3.5;
      }

      function draw(){
        ctx.clearRect(0,0,W,H);
        // draw bricks
        bricks.forEach(row=>row.forEach(b=>{ if(b.alive){ ctx.fillStyle = '#d97706'; ctx.fillRect(b.x,b.y,b.w,b.h); ctx.strokeStyle='rgba(0,0,0,0.12)'; ctx.strokeRect(b.x,b.y,b.w,b.h); } }));
        // draw paddle
        ctx.fillStyle = '#38bdf8'; ctx.fillRect(paddleX, PADDLE_Y, PADDLE_WIDTH, PADDLE_HEIGHT);
        // draw ball
        ctx.beginPath(); ctx.fillStyle = '#fef08a'; ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2); ctx.fill();
        // HUD overlay handled by DOM
      }

      function update(){
        if(!running || paused) return;
        // move ball
        ball.x += ball.vx; ball.y += ball.vy;
        // wall collision
        if(ball.x - ball.radius <= 0){ ball.x = ball.radius; ball.vx *= -1 }
        if(ball.x + ball.radius >= W){ ball.x = W - ball.radius; ball.vx *= -1 }
        if(ball.y - ball.radius <= 0){ ball.y = ball.radius; ball.vy *= -1 }

        // paddle collision
        if(ball.y + ball.radius >= PADDLE_Y && ball.y + ball.radius <= PADDLE_Y + PADDLE_HEIGHT){
          if(ball.x >= paddleX && ball.x <= paddleX + PADDLE_WIDTH){
            // compute hit location: -1(left) .. 1(right)
            const hit = ((ball.x - paddleX) - PADDLE_WIDTH/2) / (PADDLE_WIDTH/2);
            const angle = hit * (Math.PI/3); // max 60deg
            const speed = Math.min(7.2, Math.hypot(ball.vx, ball.vy) + 0.2);
            ball.vx = speed * Math.sin(angle);
            ball.vy = -Math.abs(speed * Math.cos(angle));
            ball.y = PADDLE_Y - ball.radius - 1;
          }
        }

        // brick collisions
        bricks.forEach(row=>row.forEach(b=>{ if(b.alive){ if(ball.x > b.x && ball.x < b.x + b.w && ball.y - ball.radius < b.y + b.h && ball.y + ball.radius > b.y){
          // simple bounce: invert vy
          b.alive = false; score += 10; scoreEl.textContent = score; ball.vy *= -1;
        } }}));

        // bottom -> lose life
        if(ball.y - ball.radius > H){
          lives -= 1; livesEl.textContent = lives; if(lives <= 0){ running = false; setTimeout(()=>alert('Game Over — score: '+score),50); } else { resetBallAndPaddle(); paused = true; }
        }

        // win check
        if(bricks.flat().every(b=>!b.alive)){
          running = false; setTimeout(()=>alert('You Win! Score: '+score),50);
        }
      }

      function loop(){ update(); draw(); animationId = requestAnimationFrame(loop); }

      // input
      window.addEventListener('keydown',(e)=>{
        if(e.key === 'ArrowLeft') { paddleX = Math.max(0, paddleX - 24); }
        if(e.key === 'ArrowRight'){ paddleX = Math.min(W - PADDLE_WIDTH, paddleX + 24); }
        if(e.key === ' '){ paused = !paused; }
      });
      canvas.addEventListener('mousemove', (e)=>{ const rect = canvas.getBoundingClientRect(); const mx = e.clientX - rect.left; paddleX = Math.min(W - PADDLE_WIDTH, Math.max(0, mx - PADDLE_WIDTH/2)); });

      startBtn.addEventListener('click', ()=>{ if(!running){ running = true; paused = false; loop(); } else { paused = !paused; } });
      restartBtn.addEventListener('click', ()=>{ running = false; cancelAnimationFrame(animationId); score = 0; lives = 3; scoreEl.textContent = score; livesEl.textContent = lives; initBricks(); resetBallAndPaddle(); draw(); });

      // init
      initBricks(); resetBallAndPaddle(); draw();
    })();
  </script>
</body>
</html>
